<html lang="en">
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Sentences</title>

	<!-- Bootstrap core CSS -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
	<!-- Custom styles for this template -->
	<style>
		 body {
			padding-top: 70px;
		}

		.myborder {
			border: solid rgb(220,220,220) 1px;
			padding: 10px;
			margin-bottom: 15px; 
		}
		.myborder-notop {
			border-top: none;
		}
		
		.breath {
			margin-top: 15px;
		}
		
		.tab-pane {
			min-height: 150px;
		}
		
		.person:before {
			content: "  ";
			background-color: #ffffff !important;
		}
		.person:after {
			content: "  ";
			background-color: #ffffff !important;
		}

		.literaryWork:before {
			content: "";
			background-color: #ffffff !important;
		}
		.literaryWork:after {
			content: "";
			background-color: #ffffff !important;
		}
		.character:before {
			content: "";
			background-color: #ffffff !important;
		}
		.character:after {
			content: "";
			background-color: #ffffff !important;
		}
		
		.concept:before {
			content: "";
			background-color: #ffffff !important;
		}
		.concept:after {
			content: "";
			background-color: #ffffff !important;
		}
		
		q.refOther:before {
			content: """;
			background-color: #ffffff !important;
		}
		q.refOther:after {
			content: """;
			background-color: #ffffff !important;
		}
		
		q.refFrankenstein:before {
			content: """;
			background-color: #ffffff !important;
		}
		q.refFrankenstein:after {
			content: """;
			background-color: #ffffff !important;
		}
		
		
		.text-person {
			background-color: #ffddff;
		}
		
		.text-character {
			background-color: #ddffdd;
		}
		.text-literaryWork {
			background-color: #ffffdd;
		}	
         
		.text-concept {
			background-color: #ffddff;
		}
		
		.text-refOther {
			background-color: #ffffdd;
		}	

        .text-refFrankenstein {
			background-color: #ffffdd;
		}	
        
		ul.minimal {
			padding-inline-start: 0.5em; 
		}
		.list {
			font-size: 80%;
			line-height: 1.2; 
			margin: 0; 
			white-space: nowrap; 
			overflow-x: hidden;
			list-style-position:inside;  
		}
		.list a {
			color: black;
			margin: 0; 
		}
		
		
		.animate {
			animation-name: bgcolor ;
			animation-duration: 0.75s ; 
			animation-iteration-count: 3;
			animation-fill-mode: backwards;
		}

		@keyframes bgcolor {
			from { background-color: #ffffff;  }
			to { background-color: #cccc00; }
		}
		
		
		.small {
			font-size: 80%;
			line-height: 1.2; 
			margin: 0; 
		}

		.list::-webkit-scrollbar {
			display: none; /* for Chrome, Safari, and Opera */	
		}

					
	</style>
	</head>

	<body>

	<!-- Fixed navbar -->
	<nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
		<a class="navbar-brand" href="#">Sentences</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarCollapse">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item active">
					<a class="nav-link" href="#" role="button" data-toggle="modal" data-target="#about">About <span class="sr-only">(current)</span></a>
				</li>
			</ul>
		</div>
	</nav>

  	<div class="container-fluid">

		<!-- Main component for a primary marketing message or call to action -->
		<div class="row clearfix">
			<div class="col-md-3">
				<div class="row clearfix border p-2">
					<div class="col-md-12">
						<h3>Documents</h3>
						<ul id="list">
						</ul>
					</div>
				</div>
				<div class="row clearfix mt-4">
					<div class="col-md-12">
						<form role="form">
							           <div class="checkbox"><label>
								        <input type="checkbox" id="showperson" class="show">Show person</label></div>
							           <div class="checkbox"><label>
							        	<input type="checkbox" id="showcharacter" class="show">Show character</label></div>
							           <div class="checkbox"><label>
								       <input type="checkbox" id="showliteraryWork" class="show">Show literary work</label></div>
							            <div class="checkbox"><label>
								         <input type="checkbox" id="showconcept" class="show">Show concept</label></div>
							           <div class="checkbox"><label>
								         <input type="checkbox" id="showrefOther" class="show">Show external references</label></div>
							            <div class="checkbox"><label>
								         <input type="checkbox" id="showrefFrankenstein" class="show">Show Frankenstein references</label></div>
                          </form>
					</div>
				</div>
				<div class="row clearfix mt-4">
					<div class="col-md-12">
						<ul class="nav nav-tabs" id="sentenceTab" role="tablist">
						  <li class="nav-item">
						    <a class="nav-link active" id="info-tab" data-toggle="tab" href="#info" role="tab" aria-controls="view" aria-selected="true">Info</a>
						  </li>
							<a class="nav-link active" id="person-tab" data-toggle="tab" href="#person" role="tab" aria-controls="view" aria-selected="true">Person</a>
						  </li>
						  <li class="nav-item">
							<a class="nav-link" id="character-tab" data-toggle="tab" href="#character" role="tab" aria-controls="home" aria-selected="false">Character</a>
						  </li>
						  <li class="nav-item">
							<a class="nav-link" id="literaryWork-tab" data-toggle="tab" href="#literaryWork" role="tab" aria-controls="home" aria-selected="false">Literary Work</a>
						  </li>
						</ul>

						<!-- Tab panes -->
						<div class="tab-content" id="sentenceContent">
						    <div class="tab-pane active myBorder myBorder-notop" id="info" role="tabpanel" aria-labelledby="info-tab">
							</div>
							<div class="tab-pane active myBorder myBorder-notop" id="person" role="tabpanel" aria-labelledby="person-tab">
								<ul></ul>
							</div>
							<div class="tab-pane myBorder myBorder-notop" id="character" role="tabpanel" aria-labelledby="character-tab">
								<ul></ul>
							</div>
							<div class="tab-pane myBorder myBorder-notop" id="literaryWork" role="tabpanel" aria-labelledby="literaryWork-tab">
								<ul></ul>
							</div>
						</div>
					</div>
				</div>
			</div>		
			<div class="col-md-9">
				<div class="jumbotron" id="title"><h1>Sentences</h1> </div>
				<div id="file"></div>
			</div>
		</div>	
	</div> <!-- /container -->


<!-- Modal -->
<div class="modal fade" id="about" tabindex="-1" role="dialog" aria-labelledby="aboutLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="aboutLabel">About Sentences</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
		<p>Used for the purpose of the course in Web Technologies for DHDK students at the University of Bologna</p>
		<p>Â© 2022 Fabio Vitali. All right reserved.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">Ok</button>
      </div>
    </div>
  </div>
</div>

	<!-- Bootstrap core JavaScript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
	<script>
		String.prototype.tpl = function(o) { 
			var r = this ; 
			for (var i in o) { 
				r = r.replace(new RegExp("\\$"+i, 'g'),o[i])  
			} 
			return r 
		}
		
		var listItemTpl = `<li><a href='#' onclick='load("$url")'>$label</a></li>`
		
		$(document).ready(main);

		function main() {
			$.ajax({
				method: 'GET',
				url: 'https://imwtproject.github.io/howdowecallitmagazine/frank.json',
				success: function(d) {
					for (var i=0; i<d.length; i++) {
						$('#list').append(listItemTpl.tpl({url:d[i].url, label: d[i].label}))
					}	
				},
				error: function() {
					alert('No document to show')
				}
			});
			
			 $('#showperson').click(function() {
				if (this.checked) 
					$('.person').addClass('text-person')
				else
					$('.person').removeClass('text-person')
			})
			
			$('#showcharacter').click(function() {
				if (this.checked) 
					$('.character').addClass('text-character')
				else
					$('.character').removeClass('text-character')
			})
			
			$('#showliteraryWork').click(function() {
				if (this.checked) 
					$('.literaryWork').addClass('text-literaryWork')
				else
					$('.literaryWork').removeClass('text-literaryWork')
			})
			
			$('#showconcept').click(function() {
				if (this.checked) 
					$('.concept').addClass('text-concept')
				else
					$('.concept').removeClass('text-concept')
			})
			
			$('#showrefOther').click(function() {
				if (this.checked) 
					$('q.refOther').addClass('text-refOther')
				else
					$('q.refOther').removeClass('text-refOther')
			})
			
			
			$('#showrefFrankenstein').click(function() {
				if (this.checked) 
					$('q.refFrankenstein').addClass('text-refFrankenstein')
				else
					$('q.refFrankenstein').removeClass('text-refFrankenstein')
			})
		}
		
		function load(file) {
			$.ajax({
				method: 'GET',
				url: file,
				success: function(d) {
					$('#file').html(d)
					$('#title').html($('#file h1'))
					$('.show').prop("checked", false)
					addIds()
					filltabs()
					$('#title').html($('#file h1'))
				},
				error: function() {
					alert('Could not load file '+file)
				}
			});
		}
		
		function addIds() {
			addId('.person','person')
			addId('.character', 'character')
			addId('.literaryWork', 'literaryWork')
		}
		
		function addId(what, prefix) {
			var id = '0'
			var elements = $(what); 
			for (var i=0; i<elements.length; i++) {
				elements[i].id = prefix + "-" + id++
			}
		}
		
		function filltabs(){
		    fillInfo("#file", "#info")
			filltab("#file .person","list-person","#person")
			filltab("#file .character","list-character","#character")
			filltab("#file .literaryWork","list-literaryWork","#literaryWork")
		}
		
		
		function fillInfo(from, where) {
			var item = `
				<p class="list title"><b>Title: </b> $title</p>
				<p class="list author"><b>Author: </b> $author</p>
				<p class="list author"><b>Headings: </b><ul>$headings</ul></p>
				` ;
			$(where).empty(); 

			var title = $(from + ' h1')[0].innerText
			var author = $(from + ' .byline')[0].innerText
			var headingList = $(from + ' h2')
			var headings = ""
			for (var i=0; i<headingList.length; i++) {
				headings += "<li class='small'>"+headingList[i].innerHTML+"</li>"
			}
			$(where).append(item.tpl( {
				author: author,
				title: title,
				headings: headings
			}))
		}
		
		function filltab(what,style,where) {
			var list = `<li class="list $style"><a href="#" onclick="goto('$place')">$content</a></li>`
			var elements = $(what); 
			$(where+' ul').empty(); 
			for (var i=0; i<elements.length; i++) {
				$(where+' ul').append(list.tpl({
					style:style, 
					place: '#'+elements[i].id,
					content: elements[i].innerHTML
				}) )
			}
		}
		
		function goto(id) {
			var t = $(id)[0].offsetTop;
			$('body').animate({ scrollTop: t }, 200);
			$(id).addClass('animate');
			setTimeout(function(){
				$(id).removeClass('animate');
			},5000);
		}
		
	</script>
	</body>
</html>